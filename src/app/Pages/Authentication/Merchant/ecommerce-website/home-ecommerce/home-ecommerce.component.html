<div class="container-fluid p-0"
  *ngIf="dataservice.template"
  [style.background]="dataservice.template.primaryBackground"
  [style.fontFamily]="dataservice.template.fontFamily"
  [style.textAlign]="dataservice.template.textAlign"
  [style.fontWeight]="dataservice.template.body.fontWeight"
  [style.fontSize]="dataservice.template.body.fontSize"
  [style.color]="dataservice.template.primaryColor">
  <section *ngIf="dataservice.productSearchString.length < 1" class="container-fluid d-flex level-up main-comp p-0">
    <div [style]="dataservice.template.headings.heroHeading.bgImage">
      <img
        [src]="dataservice.template.templateImages.heroImage"
        class=""
        style="width: 100%; height: 50rem; object-fit: cover;"
        alt=""
        srcset=""
      />
      <div class="hero-overlay">
        <h1 id="hero-overlay"
          [innerHTML]="dataservice.template.headings.heroHeading.text"
          [style.fontSize]="dataservice.template.headings.heroHeading.fontSize"
          [style.lineHeight]="
            dataservice.template.headings.heroHeading.lineHeight
          "
          [style.fontWeight]="
            dataservice.template.headings.heroHeading.fontWeight
          "
          (click)="editText(dataservice.template.headings.heroHeading.text,'headings','heroHeading', 'text')"
        ></h1>
        <button
          [style.padding]="dataservice.template.buttons.padding"
          [style.backgroundColor]="dataservice.template.buttons.backgroundColor"
          [style.borderRadius]="dataservice.template.buttons.borderRadius"
          [style.color]="dataservice.template.buttons.color"
          [innerHTML]="dataservice.template.headings.heroHeading.btnText"
          [style.borderColor]="dataservice.template.buttons.borderColor"
          (click)="editText(dataservice.template.headings.heroHeading.btnText,'headings','heroHeading', 'btnText')"
        >
          {{ dataservice.template.headings.heroHeading.btnText }}
        </button>
      </div>
      <div class="overlay-backdrop"></div>
    </div>

    <div [ngClass]="!dataservice.isEditingTemp ? 'd-none' : 'overlay edit-btn-block'">
      <button
       [style.color]="dataservice.template.primaryColor"
       [style.background]="dataservice.template.primaryBackground"
        mat-mini-fab (click)="openFileInput(fileInput3)">
        <mat-icon>edit</mat-icon>
      </button>
      <input type="file" name="" #fileInput3 style="display: none" (change)="onSelectFile($event, 'hero')"/>
      <button
       [style.color]="dataservice.template.primaryColor"
       [style.background]="dataservice.template.primaryBackground"
        mat-mini-fab (click)="dataservice.changeImageByLink('templateImages.heroImage')">
        <mat-icon>link</mat-icon>
      </button>
      <button
       [style.color]="dataservice.template.primaryColor"
       [style.background]="dataservice.template.primaryBackground"
        mat-mini-fab>
        <mat-icon>delete</mat-icon>
      </button>
    </div>



  </section>
  <section *ngIf="dataservice.productSearchString.length < 1" class="container-fluid categories-container">
    <div
    [style.fontSize]="dataservice.template.headers.fontSize"
    [style.fontWeight]="dataservice.template.headers.fontWeight"
     class="section-header">Categories</div>
    <div class="row categories">
      @for(category of dataservice.productCategories; track category){
        <div style="margin-bottom: 20px;" class="cat col-md-3">
          <div style="position: relative;;">
            <img class="w-100" src="assets/images/ecommerce-home-dresses.svg" alt="" />
          <div class="cat-overlay">
            <span >{{category}}</span>
          </div>
          </div>
        </div>
      <!-- </div> -->
      }
    </div>
    <!-- <div class="row second-row-percent"> -->
    <div class="two-sec">
      <div
        class="main-comp p-0"
        style="position: relative"
      >
        <img
          [src]="dataservice.template.sectionTwo.twoSection.image"
          alt="two ladies in red"
          class="two-ladies w-100"
        />

        <div [ngClass]="!dataservice.isEditingTemp ? 'd-none' : 'overlay edit-btn-block'">
          <button
           [style.color]="dataservice.template.primaryColor"
           [style.background]="dataservice.template.primaryBackground"
            mat-mini-fab (click)="openFileInput(fileInput1)">
            <mat-icon>edit</mat-icon>
          </button>
          <input type="file" name="" #fileInput1 style="display: none" (change)="onSelectFile($event, 'twoSection')"/>
          <button
           [style.color]="dataservice.template.primaryColor"
           [style.background]="dataservice.template.primaryBackground"
            mat-mini-fab (click)="dataservice.changeImageByLink('sectionTwo.twoSection.image')">
            <mat-icon>link</mat-icon>
          </button>
          <button
           [style.color]="dataservice.template.primaryColor"
           [style.background]="dataservice.template.primaryBackground"
            mat-mini-fab>
            <mat-icon>delete</mat-icon>
          </button>
        </div>

        <!-- <div [ngClass]="!dataservice.isEditingTemp ? 'd-none' : 'overlay edit-btn-block'">
          <button class="edit-btn" mat-icon-button (click)="openFileInput(fileInput1)">
            <mat-icon>edit</mat-icon>
          </button>
          <input
            type="file"
            name=""
            #fileInput1
            style="display: none"
            (change)="onSelectFile($event, 'twoSection')"
          />
          <button class="edit-btn" mat-icon-button (click)="showLink()">
            <mat-icon>link</mat-icon>
          </button>
          <button class="edit-btn" mat-icon-button>
            <mat-icon>delete</mat-icon>
          </button>
          <div
            class="input-link-div"
            *ngIf="dataservice.inputLinkVisibility[2]"
          >
            <input
              type="text"
              class="input-link"
              name="inputlink"
              id="input-link"
              placeholder="Input Link here"
            />
          </div>
        </div> -->
      </div>
      <div
        class="percent-block d-flex flex-column align-items-center justify-content-center p-0"
      >
        <h2
          [style.fontSize]="dataservice.template.headers.fontSize"
          [innerHTML]="dataservice.template.sectionTwo.twoSection.text.discount"
          (click)="editText(dataservice.template.sectionTwo.twoSection.text.discount,'sectionTwo','twoSection', 'text', 'discount')"
          [style.fontWeight]="dataservice.template.headers.fontWeight"
          class="upto-40-percent"
        >
        </h2>
        <p class="special-offers"
          [innerHTML]="dataservice.template.sectionTwo.twoSection.text.otherText"
          (click)="editText(dataservice.template.sectionTwo.twoSection.text.otherText,'sectionTwo','twoSection', 'text', 'otherText')">
        </p>
        <button
          [style.padding]="dataservice.template.buttons.padding"
          [style.backgroundColor]="dataservice.template.buttons.backgroundColor"
          [style.borderRadius]="dataservice.template.buttons.borderRadius"
          [style.color]="dataservice.template.buttons.color"
          [style.borderColor]="dataservice.template.buttons.borderColor"
        >
          SHOP NOW
        </button>
      </div>
    </div>
  </section>
  <section class="featured-items container-fluid">
    <div
      [style.fontSize]="dataservice.template.headers.fontSize"
      [style.fontWeight]="dataservice.template.headers.fontWeight"
      class="featured-items-header"
    >
      {{ dataservice.template.sectionThree.name }}
    </div>
    <div class="row justify-content-between" *ngIf="dataservice.products.length > 0">
      @for(product of dataservice.products | filterProduct:dataservice.productSearchString; track product){
        <div class="col-md-3">
          <div class="card card-structure">
            <img
              (click)="goToProduct(product)"
              [src]="product.images[0].url"
              class="card-img-top card-img"
              alt="..."
            />
            <div class="card-body">
              <div
                class="product-name d-flex justify-content-between align-items-center"
              >
                <h5 class="card-title">{{ product.name }}</h5>
                <div class="product-btn">
                  <button
                    class="heart nav-icons"
                    (click)="liked(product)"
                    [ngClass]="{ liked: product.isliked }"
                    mat-icon-button
                  >
                    <mat-icon>favorite</mat-icon>
                  </button>
                  <button
                    (click)="addToCart(product)"
                    class="cart nav-icons"
                    color="primary"
                    mat-icon-button
                  >
                    <mat-icon>shopping_cart</mat-icon>
                  </button>
                </div>
              </div>
              <p class="blossom-bag-paragraph">{{ product.category }}</p>
              <div
                class="ratings d-flex justify-content-betweeen align-items-center"
              >
                <app-star-rating
                  [rating]="product.rating"
                  [readonly]="true"
                ></app-star-rating>
                <span class="ratings-43">
                  <span class="number-rating">{{ product.rating }}</span> Ratings
                </span>
              </div>
              <div class="product-price">
                <span class="discount-price">
                  ${{ product.price * ((100 - product.discount) / 100) }}
                </span>
                <span class="actual-price" *ngIf="product.discount > 0"
                  >${{ product.price }}</span
                >
                <span class="discount-percent" *ngIf="product.discount > 0">
                  {{ product.discount }}<span class="per-off">% OFF</span></span
                >
              </div>
              <div class="product-color-div d-flex">
                <div class="blue product-color"></div>
                <div class="yellow product-color"></div>
                <div class="voilet product-color"></div>
                <div class="red product-color"></div>
              </div>
            </div>
          </div>
        </div>
        }@empty {
          <span>You dont have any product in your store</span>
        }
        @if((dataservice.productSearchString.length > 0) && dataservice.doesNotExist.exist){
          <span>no product with name <i><strong>{{dataservice.productSearchString}}</strong></i> exist</span>
        }
    </div>
  </section>
</div>