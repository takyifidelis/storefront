<div class="container-fluid" style="height: 100vh">
  <div [formGroup]="user">
    <div class="row" style="height: 100vh">
      <div class="col-7" style="background-color: rgb(238, 234, 234)">
        <div class="m-4">
          <div>
            <p class="title">CarbonOffsets</p>
          </div>
          <div class="p-4" style="background: #fff">
            <section>
              <div>
                <p class="text">PAYMENT METHOD</p>
              </div>
              <div>
                <ngx-paypal [config]="payPalConfig"></ngx-paypal>
              </div>
              <div class="text-2" style="display: flex; gap: 10px">
                <div>
                  <fa-icon [icon]="info" style="color: green"></fa-icon>
                </div>
                <div>payments may take up to 72 hours to process.</div>
              </div>
            </section>
            <div class="container-fluid" style="margin-top: 12px">
              <div class="d-flex mb-5 align-items-center gap-3">
                <h2 class="m-0">Shipping</h2>
              </div>
              <table
                mat-table
                [dataSource]="dataSource"
                class="mat-elevation-z8"
                matSort
              >
                <ng-container matColumnDef="name">
                  <th
                    style="background-color: #f9fafb"
                    mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header
                    class="header"
                  >
                    Name
                  </th>
                  <td
                    class="content"
                    mat-cell
                    *matCellDef="let row"
                    style="text-align: center; width: 179px"
                  >
                    <img
                      src="/assets/icons/PayPal.svg"
                      alt=""
                      style="text-align: center"
                    />
                  </td>
                </ng-container>
                <ng-container matColumnDef="phone">
                  <th
                    style="background-color: #f9fafb"
                    mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header
                    class="header"
                  >
                    Contact
                  </th>
                  <td class="content" mat-cell *matCellDef="let row">
                    {{ row?.wallet }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="streetAddress">
                  <th
                    style="background-color: #f9fafb"
                    mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header
                    class="header"
                  >
                    Street Address
                  </th>
                  <td class="content" mat-cell *matCellDef="let row">
                    {{ row.orderPayout?.orderId }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="countryCode">
                  <th
                    style="background-color: #f9fafb"
                    mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header
                    class="header"
                  >
                    Country Code
                  </th>
                  <td class="content total" mat-cell *matCellDef="let row">
                    {{ row.currency }} {{ row.orderPayout.amount }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="apartmentNo">
                  <th
                    style="background-color: #f9fafb"
                    mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header
                    class="header"
                  >
                    Apartment Number
                  </th>
                  <td mat-cell *matCellDef="let row" class="p-2">
                    <div>
                      <p
                        class="content commission"
                        style="margin-bottom: 0; color: red !important"
                      >
                        {{ row.commission }}%
                      </p>
                    </div>
                  </td>
                </ng-container>

                <ng-container matColumnDef="city">
                  <th
                    style="background-color: #f9fafb"
                    mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header
                    class="header"
                  >
                    City
                  </th>
                  <td class="content recieved" mat-cell *matCellDef="let row">
                    {{ row.currency }} {{ row.amount }}
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: displayedColumns"
                ></tr>
              </table>
              <mat-paginator
                [pageSizeOptions]="[5, 10, 25, 100]"
                aria-label="Select page of users"
              ></mat-paginator>
            </div>
            <section class="shipping-details" style="padding-top: 20px">
              <div>
                <p class="text">SHIPPING DETAILS</p>
              </div>

              <div class="row" style="margin-bottom: 10px">
                <div class="col">
                  <div class="label title">
                    <label for="first-name"> First Name </label>
                  </div>
                  <div class="input-wrapper">
                    <input
                      type="text"
                      id="first-name"
                      class="form-control"
                      formControlName="name"
                    />
                  </div>
                </div>
                <div class="col">
                  <div class="label title">
                    <label for="first-name"> Last Name </label>
                  </div>
                  <div class="input-wrapper">
                    <input type="text" id="last-name" class="form-control" />
                  </div>
                </div>
              </div>
              <div class="address margin">
                <div class="label title">
                  <label for="address">Street Address</label>
                </div>
                <div class="input">
                  <input
                    type="text"
                    id="address"
                    class="form-control"
                    formControlName="streetAddress"
                  />
                </div>
              </div>
              <div class="address margin">
                <div class="label title">
                  <label for="apartment-number">Apartment Number</label>
                </div>
                <div class="input">
                  <input
                    type="text"
                    id="apartment-number"
                    class="form-control"
                    formControlName="apartmentNo"
                  />
                </div>
              </div>
              <div class="country margin">
                <div class="country">
                  <div class="label title">
                    <label for="country-code">Country Code</label>
                  </div>
                  <div class="input">
                    <input
                      type="text"
                      formControlName="countryCode"
                      id="country-code"
                      class="form-control"
                    />
                  </div>
                </div>
              </div>
              <div class="address margin">
                <div class="label title">
                  <label for="telephone">Phone number</label>
                </div>
                <div class="input">
                  <input
                    type="text"
                    formControlName="phone"
                    id="telephone"
                    class="form-control"
                  />
                </div>
              </div>
              <div class="address margin">
                <div class="label title">
                  <label for="city">City</label>
                </div>
                <div class="input">
                  <input
                    type="text"
                    formControlName="city"
                    id="city"
                    class="form-control"
                  />
                </div>
              </div>
              <div class="address margin">
                <div class="label title">
                  <label for="postal-code">Postal Code</label>
                </div>
                <div class="input">
                  <input
                    type="text"
                    formControlName="postalCode"
                    id="postal-code"
                    class="form-control"
                  />
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>
      <div class="col-5" style="margin-top: 30px; padding: 31px">
        <div>
          <p class="title">ORDER SUMMARY</p>
        </div>
        <!-- @for(product of dataService.cart; track product){ -->

        <div class="row">
          <div class="col">
            <p class="text">ITEM</p>
          </div>
          <div class="col">
            <div class="row">
              <div class="col">
                <p class="text">QUANTITY</p>
              </div>
              <div class="col">
                <P class="text">PRICE</P>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="col"></div>
          </div>
        </div>
        <!--         </div>
        <div class="row" *ngFor="let item of cart">
          <div class="col">
            <p class="text-2">{{ item.name }}</p>
          </div>
          <div class="col">
            <div class="row">
              <div class="col">
                <p class="text-2">{{ item.quant }}</p>
              </div>
              <div class="col">
                <P class="text-2">{{ item.price }} EUR</P> -->

        <div class="">
          @for (product of dataService.cart; track product) {
          <div class="row">
            <div class="col">
              <p class="text-2">{{ product.name }}</p>
            </div>
            <div class="col">
              <div class="row">
                <div class="col">
                  <p class="text-2">{{ product.quant || 1 }}</p>
                </div>
                <div class="col">
                  <P class="text-2">{{ product.price }}</P>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="col"></div>
            </div>
          </div>
          }
        </div>
        <div class="d-flex justify-content-between">
          <div>
            <p class="text">Total:</p>
          </div>
          <div class="title" style="margin-right: 64px">
            ${{ getTotalCost() }}
          </div>
        </div>
        <div
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
          "
          (click)="createOrder()"
        >
          <button
            style="
              background: rgb(233, 238, 233);
              color: rgb(48, 77, 4);
              border: 1px solid rgb(4, 54, 4);
            "
          >
            PROMO CODE
          </button>
          <button
            type="submit"
            style="background: rgb(114, 176, 20); color: #fff"
          >
            CONFIRM YOUR ORDER
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
