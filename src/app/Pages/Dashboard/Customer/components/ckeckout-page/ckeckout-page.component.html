<div class="container-fluid" style="height: 100vh">
  <div [formGroup]="user">
    <div class="row" style="height: 100vh">
      <div class="col-7" style="background-color: rgb(238, 234, 234)">
        <div class="m-4">
          <div class="p-4" style="background: #fff">
            <section></section>
            <div class="container">
              <div class="">
                <div
                  class="shipping-heading d-flex justify-content-between align-items-center"
                >
                  <h4 class="select-shipping">Select Shipping Address</h4>
                  <div class="add-shipping-div" (click)="moreVert()">
                    <img src="assets\images\plus.svg" alt="" />
                    <span>Add Address</span>
                  </div>
                </div>
                <!-- Hello -->
                <mat-form-field>
                  <mat-label>Choose one</mat-label>

                  <mat-select
                    [formControl]="selectedAddressControl"
                    *ngIf="shippingSelect.length > 0"
                  >
                    <mat-select-trigger>
                      {{ selectedAddressControl.value?.streetAddress }}
                    </mat-select-trigger>
                    <mat-option
                      *ngFor="let ship of shippingSelect"
                      [value]="ship"
                    >
                      <div class="shipping-div">
                        <span class="ship-name">{{ ship["name"] }}</span>
                        <span class="shipping-code">
                          {{ ship["countryCode"] }}
                        </span>
                        <span class="shipping-street">
                          {{ ship["streetAddress"] }}
                        </span>
                        <span class="shipping-city">
                          {{ ship["city"] }}
                        </span>
                        <span class="shipping-number">
                          {{ ship["phone"] }}
                        </span>
                      </div>
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>

            <section class="shipping-details">
              <div class="cart-header">
                Shopping Cart
                <span class="cart-number">{{ cartQuantity }}</span>
              </div>

              <div class="cart-items" *ngFor="let product of cartProduct.data">
                <hr />
                <div class="product-container">
                  <p class="store-name">
                    Store Name:
                    <span class="store">{{
                      product.storeProducts["storeName"]
                    }}</span>
                  </p>
                  <div class="product-delete d-flex justify-content-between">
                    <div class="product d-flex">
                      <div class="product-images">
                        <img
                          [src]="product.images[0]['url']"
                          class="product-image"
                          alt=""
                        />
                      </div>
                      <div class="product-info">
                        <div class="product-name">{{ product.name }}</div>
                        <div
                          class="amount-quantity d-flex justify-content-between"
                        >
                          <div class="product-amount">
                            <span class="amount">Amount: USD</span>
                            {{ product.price }}
                          </div>
                        </div>
                        <div class="discount-amount">
                          <span class="discount-available">Discount: </span>
                          <span class="discount">{{ product.discount }}</span>
                        </div>
                        <div class="quantity d-flex">
                          <button class="quantity-btn">
                            <mat-icon>add</mat-icon>
                          </button>
                          <span class="quntity-number">1</span>
                          <button class="quantity-btn">
                            <mat-icon>remove</mat-icon>
                          </button>
                        </div>
                      </div>
                    </div>
                    <div class="delete-div">
                      <div class="delete-total">
                        <button class="delete-btn">
                          <mat-icon>delete</mat-icon>
                        </button>
                        <div class="total">
                          Total: <span class="total-amount">USD 50</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <hr />
              </div>
            </section>
          </div>
        </div>
      </div>
      <div class="col-5" style="margin-top: 30px; padding: 31px">
        <div>
          <p class="title">ORDER SUMMARY</p>
        </div>
        <!-- @for(product of dataService.cart; track product){ -->

        <div class="row">
          <div class="col">
            <p class="text">ITEM</p>
          </div>
          <div class="col">
            <div class="row">
              <div class="col">
                <p class="text">QUANTITY</p>
              </div>
              <div class="col">
                <P class="text">PRICE</P>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="col"></div>
          </div>
        </div>

        <div class="">
          @for (product of cart; track product) {
          <div class="row">
            <div class="col">
              <p class="text-2">{{ product.name }}</p>
            </div>
            <div class="col">
              <div class="row">
                <div class="col d-flex" style="gap: 20px">
                  <span (click)="increment()"
                    ><fa-icon [icon]="plus" style="cursor: pointer"></fa-icon
                  ></span>
                  <p class="text-2">{{ quantity || 1 }}</p>
                  <span
                    ><fa-icon [icon]="minus" style="cursor: pointer"></fa-icon
                  ></span>
                </div>
                <div class="col">
                  <P class="text-2">{{ product.price }}</P>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="col"></div>
            </div>
          </div>
          }
        </div>
        <div class="d-flex justify-content-between">
          <div>
            <p class="text">Total:</p>
          </div>
          <div class="title" style="margin-right: 64px">
            ${{ getTotalCost() }}
          </div>
        </div>
        <div class="payment-method">
          <div>
            <p class="text">PAYMENT METHOD</p>
          </div>
          <div>
            <ngx-paypal [config]="payPalConfig"></ngx-paypal>
          </div>
          <div class="text-2" style="display: flex; gap: 10px">
            <div>
              <fa-icon [icon]="info" style="color: green"></fa-icon>
            </div>
            <div>payments may take up to 72 hours to process.</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
