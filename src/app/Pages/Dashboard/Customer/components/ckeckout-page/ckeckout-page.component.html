<div class="container-fluid" style="height: 100vh">
  <div [formGroup]="user">
    <div class="row" style="height: 100vh">
      <div class="col-7" style="background-color: rgb(238, 234, 234)">
        <div class="m-4">
          <div class="p-4" style="background: #fff">
            <section></section>
            <div class="container">
              <div class="">
                <div
                  class="shipping-heading d-flex justify-content-between align-items-center"
                >
                  <h4>Select Shipping Address</h4>
                  <div class="add-shipping-div" (click)="moreVert()">
                    <img src="assets\images\plus.svg" alt="" />
                    <span>Add Address</span>
                  </div>
                </div>
                <!-- Hello -->
                <mat-form-field>
                  <mat-label>Choose one</mat-label>

                  <mat-select
                    [formControl]="selectedAddressControl"
                    *ngIf="shippingSelect.length > 0"
                  >
                    <mat-select-trigger>
                      {{ selectedAddressControl.value?.streetAddress }}
                    </mat-select-trigger>
                    <mat-option
                      *ngFor="let ship of shippingSelect"
                      [value]="ship"
                    >
                      <div class="shipping-div">
                        <span class="ship-name">{{ ship["name"] }}</span>
                        <span class="shipping-code">
                          {{ ship["countryCode"] }}
                        </span>
                        <span class="shipping-street">
                          {{ ship["streetAddress"] }}
                        </span>
                        <span class="shipping-city">
                          {{ ship["city"] }}
                        </span>
                        <span class="shipping-number">
                          {{ ship["phone"] }}
                        </span>
                      </div>
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div>
              <button class="btn btn-primary" (click)="newShipping()">
                New Shipping Address
              </button>
            </div>
            <section
              class="shipping-details"
              style="padding-top: 20px"
              *ngIf="addShipping"
            >
              <div class="row" style="margin-bottom: 10px">
                <div class="col">
                  <div class="label title">
                    <label for="first-name"> First Name </label>
                  </div>
                  <div class="input-wrapper">
                    <input
                      type="text"
                      id="first-name"
                      class="form-control"
                      formControlName="name"
                    />
                  </div>
                </div>
                <div class="col">
                  <div class="label title">
                    <label for="first-name"> Last Name </label>
                  </div>
                  <div class="input-wrapper">
                    <input type="text" id="last-name" class="form-control" />
                  </div>
                </div>
              </div>
              <div class="address margin">
                <div class="label title">
                  <label for="address">Street Address</label>
                </div>
                <div class="input">
                  <input
                    type="text"
                    id="address"
                    class="form-control"
                    formControlName="streetAddress"
                  />
                </div>
              </div>
              <div class="address margin">
                <div class="label title">
                  <label for="apartment-number">Apartment Number</label>
                </div>
                <div class="input">
                  <input
                    type="text"
                    id="apartment-number"
                    class="form-control"
                    formControlName="apartmentNo"
                  />
                </div>
              </div>
              <div class="country margin">
                <div class="country">
                  <div class="label title">
                    <label for="country-code">Country Code</label>
                  </div>
                  <div class="input">
                    <input
                      type="text"
                      formControlName="countryCode"
                      id="country-code"
                      class="form-control"
                    />
                  </div>
                </div>
              </div>
              <div class="address margin">
                <div class="label title">
                  <label for="telephone">Phone number</label>
                </div>
                <div class="input">
                  <input
                    type="text"
                    formControlName="phone"
                    id="telephone"
                    class="form-control"
                  />
                </div>
              </div>
              <div class="address margin">
                <div class="label title">
                  <label for="city">City</label>
                </div>
                <div class="input">
                  <input
                    type="text"
                    formControlName="city"
                    id="city"
                    class="form-control"
                  />
                </div>
              </div>
              <div class="address margin">
                <div class="label title">
                  <label for="postal-code">Postal Code</label>
                </div>
                <div class="input">
                  <input
                    type="text"
                    formControlName="postalCode"
                    id="postal-code"
                    class="form-control"
                  />
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>
      <div class="col-5" style="margin-top: 30px; padding: 31px">
        <div>
          <p class="title">ORDER SUMMARY</p>
        </div>
        <!-- @for(product of dataService.cart; track product){ -->

        <div class="row">
          <div class="col">
            <p class="text">ITEM</p>
          </div>
          <div class="col">
            <div class="row">
              <div class="col">
                <p class="text">QUANTITY</p>
              </div>
              <div class="col">
                <P class="text">PRICE</P>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="col"></div>
          </div>
        </div>

        <div class="">
          @for (product of cart; track product) {
          <div class="row">
            <div class="col">
              <p class="text-2">{{ product.name }}</p>
            </div>
            <div class="col">
              <div class="row">
                <div class="col d-flex" style="gap: 20px">
                  <span (click)="increment()"
                    ><fa-icon [icon]="plus" style="cursor: pointer"></fa-icon
                  ></span>
                  <p class="text-2">{{ quantity || 1 }}</p>
                  <span
                    ><fa-icon [icon]="minus" style="cursor: pointer"></fa-icon
                  ></span>
                </div>
                <div class="col">
                  <P class="text-2">{{ product.price }}</P>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="col"></div>
            </div>
          </div>
          }
        </div>
        <div class="d-flex justify-content-between">
          <div>
            <p class="text">Total:</p>
          </div>
          <div class="title" style="margin-right: 64px">
            ${{ getTotalCost() }}
          </div>
        </div>
        <div class="payment-method">
          <div>
            <p class="text">PAYMENT METHOD</p>
          </div>
          <div>
            <ngx-paypal [config]="payPalConfig"></ngx-paypal>
          </div>
          <div class="text-2" style="display: flex; gap: 10px">
            <div>
              <fa-icon [icon]="info" style="color: green"></fa-icon>
            </div>
            <div>payments may take up to 72 hours to process.</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
